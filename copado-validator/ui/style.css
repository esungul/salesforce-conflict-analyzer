/* ===== Design tokens ===== */
:root{
  --bg:#0b1020;
  --surface:#11162a;
  --elev:#171f3a;
  --text:#e9edf5;
  --muted:#9aa4b2;

  /* Krishna-inspired colors */
  --brand:#005793;  /* Medium Electric Blue - A rich, bluish brand color. */
  --brand-2:#553299; /* Blue-Magenta Violet - A complementary deeper tone. */
  --ok:#2ecc71;
  --warn:#ffb02e;
  --danger:#ff5567;

  --radius:12px;
  --shadow:0 8px 24px rgba(0,0,0,.18);
  --border:1px solid rgba(255,255,255,.07);
}

/* ===== Base ===== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;
}

/* Utilities */
.hidden{display:none !important}

/* ===== Top bar ===== */
.topbar{
  position:sticky; top:0; z-index:100;
  display:flex; align-items:center; gap:16px;
  padding:12px 16px;
  background:linear-gradient(0deg,var(--surface),var(--elev));
  box-shadow:var(--shadow);
  border-bottom:var(--border);
}
.topbar .brand{font-weight:700; letter-spacing:.2px}
.topbar .env{margin-left:auto; display:flex; gap:8px; align-items:center}
.topbar .actions{position:relative}

.btn{
  appearance:none; border:1px solid rgba(255,255,255,.12);
  background:transparent; color:var(--text);
  padding:.55rem .9rem; border-radius:10px; cursor:pointer;
}
.btn:hover{border-color:rgba(255,255,255,.28)}
.btn-primary{
  border:0;
  background:linear-gradient(90deg,var(--brand),var(--brand-2));
  color:#fff;
  box-shadow:0 6px 16px rgba(103,114,229,.35);
}

.badge{
  display:inline-block; font-weight:600; font-size:12px;
  padding:.2rem .6rem; border-radius:999px;
  background:#1a2140; /* A deep, dark blue background for contrast */
  color:#D4B2EE;      /* A soft lavender or pinkish-purple for the text */
  border:1px solid rgba(255,255,255,.08);
}

/* Analyze menu */
.menu{
  position:absolute; right:0; top:120%;
  background:var(--surface); border:var(--border); border-radius:10px;
  box-shadow:var(--shadow);
  display:none; min-width:180px; overflow:hidden;
}
.menu[aria-hidden="false"]{display:block}
.menu button{
  display:block; width:100%; text-align:left; padding:.6rem .8rem;
  background:transparent; color:var(--text); border:0; cursor:pointer;
}
.menu button:hover{background:#1a2140}

/* ===== Banner region ===== */
.banner-region{padding:10px 16px}

/* ===== Tabs ===== */
.tabs{
  display:flex; gap:6px; padding:8px 8px 0; margin:0 8px; flex-wrap:wrap;
  border-bottom:var(--border);
}
.tab-button{
  appearance:none; background:transparent; color:var(--muted);
  border:0; padding:.6rem .8rem; border-radius:10px 10px 0 0; cursor:pointer;
}
.tab-button[aria-selected="true"]{
  color:var(--text);
  background:linear-gradient(180deg,var(--elev),transparent);
  border-bottom:2px solid transparent;
  font-weight:600;
}

/* ===== Panels ===== */
.app{padding:16px}
.tab-panel{
  background:var(--surface); border:var(--border); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow);
}

/* ===== Toasts ===== */
.toasts{
  position:fixed; right:16px; bottom:16px; z-index:200;
  display:flex; flex-direction:column; gap:8px;
}
.toast{
  background:var(--elev); border:var(--border); color:var(--text);
  padding:.6rem .8rem; border-radius:10px; box-shadow:var(--shadow);
}

/* ===== Responsive tweaks ===== */
@media (max-width:720px){
  .topbar{flex-wrap:wrap; gap:8px}
  .topbar .env{order:3; width:100%; justify-content:flex-start}
}

/* ===== Optional Light Theme (Quartz) ===== */
:root[data-theme="quartz"]{
  --bg:#f6f7fb;
  --surface:#ffffff;
  --elev:#f3f4f8;
  --text:#1b2430;
  --muted:#596273;

  --brand:#3b82f6;
  --brand-2:#7c3aed;

  --ok:#10b981;
  --warn:#f59e0b;
  --danger:#ef4444;

  --border:1px solid rgba(0,0,0,.08);
  --shadow:0 8px 24px rgba(0,0,0,.08);
}

:root[data-theme="quartz"] .tab-panel{ box-shadow:none }
:root[data-theme="quartz"] .menu button:hover{ background:#eef2ff }
:root[data-theme="quartz"] .badge{ background:#eef2ff; color:#273b7a; border-color:#e0e7ff }
:root[data-theme="quartz"] .btn{ border-color:rgba(0,0,0,.12) }
:root[data-theme="quartz"] .toast{ background:#ffffff; }

.cmp-top{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.cmp-badges{ display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
.cmp-meta{ margin-top:6px; font-size:12px; }

/* === Quartz readability upgrades (append at end of style.css) === */
:root[data-theme="quartz"] .topbar{
  background:#ffffff;
  border-bottom:1px solid rgba(0,0,0,.08);
  box-shadow:0 6px 20px rgba(0,0,0,.06);
}

:root[data-theme="quartz"] .tab-panel,
:root[data-theme="quartz"] .card{
  background:#ffffff;
  border:1px solid rgba(0,0,0,.08);
  box-shadow:0 6px 16px rgba(0,0,0,.05);
}

:root[data-theme="quartz"] .story-body{
  background:#f7f8fc;
  border-top:1px solid rgba(0,0,0,.06);
}

:root[data-theme="quartz"] .cmp{
  background:#ffffff;
  border:1px solid rgba(0,0,0,.10);
}

:root[data-theme="quartz"] .cmp-name{ color:#0f172a }
:root[data-theme="quartz"] .cmp-meta{ color:#6b7280 }
:root[data-theme="quartz"] .muted{ color:#6b7280 }

:root[data-theme="quartz"] a{ color:#1d4ed8 }
:root[data-theme="quartz"] code{
  background:#f3f4f6; color:#111827; padding:2px 4px; border-radius:6px;
}

:root[data-theme="quartz"] .badge-warn{
  background:#fff7e6;  /* soft amber */
  color:#92400e;       /* amber-800 for readable text */
  border:1px solid #fde68a;
}

:root[data-theme="quartz"] .badge-danger{
  background:#fee2e2;  /* soft red */
  color:#7f1d1d;       /* red-900 for readable text */
  border:1px solid #fecaca;
}

.tabs a .tab-badge{
  margin-left:.5rem;
  display:inline-flex; align-items:center; justify-content:center;
  min-width:22px; height:22px; padding:0 6px;
  border-radius:999px; font-size:12px; font-weight:700;
  background:#eef2ff; color:#273b7a; border:1px solid #e0e7ff;
}
:root:not([data-theme="quartz"]) .tabs a .tab-badge{
  background:rgba(99,102,241,.18); color:#c7d2fe; border-color:rgba(99,102,241,.28);
}